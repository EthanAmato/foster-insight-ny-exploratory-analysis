# Foster Insight NY — Exploratory Analysis

A lightweight, reproducible workspace for exploring New York State foster care and related social indicators. The project loads public datasets, validates and standardizes types, saves cleaned outputs, and prepares exports for Power BI. A future step aligns all datasets to a county–year model (2009–2024) to support analysis and dashboarding.

## Goals
- Build clean, typed tables for seven NYS datasets
- Document coverage, schema, and assumptions in one place
- Export Power BI–ready Excel files
- Prepare for county–year alignment and modeling

## Datasets
Publicly available at [data.ny.gov](https://data.ny.gov/browse?category=Human+Services&utf8=✓&sortBy=relevance&page=1&pageSize=20)

Core sources are in `Data/` (see `Dataset_Documentation_Complete.md` for detail):
- `ChildrenFosterCareAnnually`: Children in Foster Care Annually (1994–present)
- `ChildHealthPlusenrollmentByCountyInsurer`: Child Health Plus enrollment by county and insurer (2009–present)
- `CrimeData`: Index Crimes by County and Agency (1990–present)
- `NY_Child_Care_Regulated_Programs`: Child Care Regulated Programs snapshot
- `PublicAssistanceCasesEarnedIncome`: Public Assistance Cases with Earned Income (2006–present)
- `SocialServiceStaffByYear`: Local Social Services District Staff Counts by Function (2004–present)
- `StateTaxesFeesSince1995`: State Taxes and Fees Collected (1995–present)

Each dataset’s dictionary and overview PDFs are included alongside the raw CSVs.

## Repository Structure
- `Cleaning.ipynb`: Main notebook for loading, validating types, cleaning, summaries, and exports
- `Data/Cleaned/`: Canonical cleaned CSVs
- `Data/Excel_for_PowerBI/`: Excel exports for Power BI (generated by the notebook)
- `Dataset_Documentation.md`: Concise dataset notes
- `Dataset_Documentation_Complete.md`: Full documentation with schemas and coverage
- `NYFosterDashboard.pbix`: Power BI file (work-in-progress)

## Data Cleaning and Typing
The notebook enforces consistent types across datasets:
- County/District names: strings; normalized casing
- Identifiers like ZIP and Phone: strings (preserve leading zeros)
- Counts and amounts: integers where possible (nullable `Int64` during cleaning; cast to `int64` on export)
- Rates/percentages or fractional fields: `float64`
- Years and dates: integers or parsed dates as appropriate

Cleaning includes trimming, de-duplicating, handling missing values, and standardized column names (snake_case). See the functions `validate_and_correct_dtypes` and `final_data_cleaning` in `Cleaning.ipynb`.

## Power BI Exports
The notebook writes Excel files to `Data/Excel_for_PowerBI/` with autosized columns. Recommended import model:
- Import each Excel table as-is
- Create a Date table in Power BI covering the full range
- Relate tables by `county` (or mapped county) and `year`

## Getting Started
1) Environment
- Python 3.11+ recommended
- Install dependencies:

```bash
python -m venv .venv
source .venv/Scripts/activate
pip install -U pandas openpyxl jupyter
```

2) Run the notebook
- Open `Cleaning.ipynb`
- Execute cells to load data, validate types, and generate cleaned CSV/Excel outputs

3) Open in Power BI (optional)
- Files are in `Data/Excel_for_PowerBI/`
- Use the relationships guidance above

## Status
- Cleaned CSVs available in `Data/Cleaned/`
- Notebook summarizes coverage and dtypes in markdown cells
- Excel exports are generated by running the export cell (verify the files exist after execution)

## License and Data Provenance
- Source datasets are published by NYS agencies and referenced in the `Data/` folder alongside agency-provided documentation. Review each source’s terms of use before redistribution.
- This repository contains derived works (cleaned tables and Excel exports) intended for analysis and visualization.
